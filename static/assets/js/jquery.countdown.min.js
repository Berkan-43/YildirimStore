/*! http://keith-wood.name/countdown.html	Countdown for jQuery v2.1.0.	Written by Keith Wood (wood.keith{at}optusnet.com.au) January 2008.	Available under the MIT (http://keith-wood.name/licence.html) license. 	Please attribute the author if you use it. */!function(t){"use strict";var e="countdown",i=0,n=1,o=2,s=3,r=4,a=5,u=6;t.JQPlugin.createPlugin({name:e,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1}},_rtlClass:e+"-rtl",_sectionClass:e+"-section",_amountClass:e+"-amount",_periodClass:e+"-period",_rowClass:e+"-row",_holdingClass:e+"-holding",_showClass:e+"-show",_descrClass:e+"-descr",_timerElems:[],_init:function(){function e(t){var a=1e12>t?o?window.performance.now()+window.performance.timing.navigationStart:n():t||n();a-r>=1e3&&(i._updateElems(),r=a),s(e)}var i=this;this._super(),this._serverSyncs=[];var n="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},o=window.performance&&"function"==typeof window.performance.now,s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,r=0;!s||t.noRequestAnimationFrame?(t.noRequestAnimationFrame=null,t.countdown._timer=setInterval(function(){i._updateElems()},1e3)):(r=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||n(),s(e))},UTCDate:function(t,e,i,n,o,s,r,a){"object"==typeof e&&e instanceof Date&&(a=e.getMilliseconds(),r=e.getSeconds(),s=e.getMinutes(),o=e.getHours(),n=e.getDate(),i=e.getMonth(),e=e.getFullYear());var u=new Date;return u.setUTCFullYear(e),u.setUTCDate(1),u.setUTCMonth(i||0),u.setUTCDate(n||1),u.setUTCHours(o||0),u.setUTCMinutes((s||0)-(Math.abs(t)<30?60*t:t)),u.setUTCSeconds(r||0),u.setUTCMilliseconds(a||0),u},periodsToSeconds:function(t){return 31557600*t[0]+2629800*t[1]+604800*t[2]+86400*t[3]+3600*t[4]+60*t[5]+t[6]},resync:function(){var e=this;t("."+this._getMarker()).each(function(){var i=t.data(this,e.name);if(i.options.serverSync){for(var n=null,o=0;o-1},_removeElem:function(e){this._timerElems=t.map(this._timerElems,function(t){return t===e?null:t})},_updateElems:function(){for(var t=this._timerElems.length-1;t>=0;t--)this._updateCountdown(this._timerElems[t])},_optionsChanged:function(e,i,n){n.layout&&(n.layout=n.layout.replace(/</g,"<").replace(/>/g,">")),this._resetExtraLabels(i.options,n);var o=i.options.timezone!==n.timezone;t.extend(i.options,n),this._adjustSettings(e,i,!this._eqNull(n.until)||!this._eqNull(n.since)||o);var s=new Date;(i._since&&i._sinces)&&this._addElem(e[0]),this._updateCountdown(e,i)},_updateCountdown:function(e,i){if(e=e.jquery?e:t(e),i=i||this._getInst(e)){if(e.html(this._generateHTML(i)).toggleClass(this._rtlClass,i.options.isRTL),"pause"!==i._hold&&t.isFunction(i.options.onTick)){var n="lap"!==i._hold?i._periods:this._calculatePeriods(i,i._show,i.options.significant,new Date);1!==i.options.tickInterval&&this.periodsToSeconds(n)%i.options.tickInterval!==0||i.options.onTick.apply(e[0],[n])}var o="pause"!==i._hold&&(i._since?i._now.getTime()=i._until.getTime());if(o&&!i._expiring){if(i._expiring=!0,this._hasElem(e[0])||i.options.alwaysExpire){if(this._removeElem(e[0]),t.isFunction(i.options.onExpiry)&&i.options.onExpiry.apply(e[0],[]),i.options.expiryText){var s=i.options.layout;i.options.layout=i.options.expiryText,this._updateCountdown(e[0],i),i.options.layout=s}i.options.expiryUrl&&(window.location=i.options.expiryUrl)}i._expiring=!1}else"pause"===i._hold&&this._removeElem(e[0])}},_resetExtraLabels:function(t,e){var i=null;for(i in e)i.match(/[Ll]abels[02-9]|compactLabels1/)&&(t[i]=e[i]);for(i in t)i.match(/[Ll]abels[02-9]|compactLabels1/)&&void 0===e[i]&&(t[i]=null)},_eqNull:function(t){return void 0===t||null===t},_adjustSettings:function(e,i,n){for(var o=null,s=0;s=p;p++)l=l||"?"===e._show[p]&&e._periods[p]>0,m[p]="?"!==e._show[p]||l?e._show[p]:null,d+=m[p]?1:0,c-=e._periods[p]>0?1:0;var f=[!1,!1,!1,!1,!1,!1,!1];for(p=u;p>=i;p--)e._show[p]&&(e._periods[p]?f[p]=!0:(f[p]=c>0,c--));var g=e.options.compact?e.options.compactLabels:e.options.labels,y=e.options.whichLabels||this._normalLabels,_=function(t){var i=e.options["compactLabels"+y(e._periods[t])];return m[t]?h._translateDigits(e,e._periods[t])+(i?i[t]:g[t])+" ":""},v=e.options.padZeroes?2:1,w=function(t){var i=e.options["labels"+y(e._periods[t])];return!e.options.significant&&m[t]||e.options.significant&&f[t]?''+h._minDigits(e,e._periods[t],v)+''+(i?i[t]:g[t])+"":""};return e.options.layout?this._buildLayout(e,m,e.options.layout,e.options.compact,e.options.significant,f):(e.options.compact?''+_(i)+_(n)+_(o)+_(s)+(m[r]?this._minDigits(e,e._periods[r],2):"")+(m[a]?(m[r]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[a],2):"")+(m[u]?(m[r]||m[a]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[u],2):""):''+w(i)+w(n)+w(o)+w(s)+w(r)+w(a)+w(u))+""+(e.options.description?''+e.options.description+"":"")},_buildLayout:function(e,h,l,d,c,m){for(var p=e.options[d?"compactLabels":"labels"],f=e.options.whichLabels||this._normalLabels,g=function(t){return(e.options[(d?"compactLabels":"labels")+f(e._periods[t])]||p)[t]},y=function(t,i){return e.options.digits[Math.floor(t/i)%10]},_={desc:e.options.description,sep:e.options.timeSeparator,yl:g(i),yn:this._minDigits(e,e._periods[i],1),ynn:this._minDigits(e,e._periods[i],2),ynnn:this._minDigits(e,e._periods[i],3),y1:y(e._periods[i],1),y10:y(e._periods[i],10),y100:y(e._periods[i],100),y1000:y(e._periods[i],1e3),ol:g(n),on:this._minDigits(e,e._periods[n],1),onn:this._minDigits(e,e._periods[n],2),onnn:this._minDigits(e,e._periods[n],3),o1:y(e._periods[n],1),o10:y(e._periods[n],10),o100:y(e._periods[n],100),o1000:y(e._periods[n],1e3),wl:g(o),wn:this._minDigits(e,e._periods[o],1),wnn:this._minDigits(e,e._periods[o],2),wnnn:this._minDigits(e,e._periods[o],3),w1:y(e._periods[o],1),w10:y(e._periods[o],10),w100:y(e._periods[o],100),w1000:y(e._periods[o],1e3),dl:g(s),dn:this._minDigits(e,e._periods[s],1),dnn:this._minDigits(e,e._periods[s],2),dnnn:this._minDigits(e,e._periods[s],3),d1:y(e._periods[s],1),d10:y(e._periods[s],10),d100:y(e._periods[s],100),d1000:y(e._periods[s],1e3),hl:g(r),hn:this._minDigits(e,e._periods[r],1),hnn:this._minDigits(e,e._periods[r],2),hnnn:this._minDigits(e,e._periods[r],3),h1:y(e._periods[r],1),h10:y(e._periods[r],10),h100:y(e._periods[r],100),h1000:y(e._periods[r],1e3),ml:g(a),mn:this._minDigits(e,e._periods[a],1),mnn:this._minDigits(e,e._periods[a],2),mnnn:this._minDigits(e,e._periods[a],3),m1:y(e._periods[a],1),m10:y(e._periods[a],10),m100:y(e._periods[a],100),m1000:y(e._periods[a],1e3),sl:g(u),sn:this._minDigits(e,e._periods[u],1),snn:this._minDigits(e,e._periods[u],2),snnn:this._minDigits(e,e._periods[u],3),s1:y(e._periods[u],1),s10:y(e._periods[u],10),s100:y(e._periods[u],100),s1000:y(e._periods[u],1e3)},v=l,w=i;u>=w;w++){var I="yowdhms".charAt(w),z=RegExp("\\{"+I+"<\\}([\\s\\S]*)\\{"+I+">\\}","g");v=v.replace(z,!c&&h[w]||c&&m[w]?"$1":"")}return t.each(_,function(t,e){var i=RegExp("\\{"+t+"\\}","g");v=v.replace(i,e)}),v},_minDigits:function(t,e,i){return e=""+e,e.lengtht._until.getTime()&&(t._now=l=d));var c=[0,0,0,0,0,0,0];if(e[i]||e[n]){var m=this._getDaysInMonth(l.getFullYear(),l.getMonth()),p=this._getDaysInMonth(d.getFullYear(),d.getMonth()),f=d.getDate()===l.getDate()||d.getDate()>=Math.min(m,p)&&l.getDate()>=Math.min(m,p),g=function(t){return 60*(60*t.getHours()+t.getMinutes())+t.getSeconds()},y=Math.max(0,12*(d.getFullYear()-l.getFullYear())+d.getMonth()-l.getMonth()+(d.getDate()v&&l.setDate(v),l.setFullYear(l.getFullYear()+c[i]),l.setMonth(l.getMonth()+c[n]),_&&l.setDate(v)}var w=Math.floor((d.getTime()-l.getTime())/1e3),I=null,z=function(t,i){c[t]=e[t]?Math.floor(w/i):0,w-=c[t]*i};if(z(o,604800),z(s,86400),z(r,3600),z(a,60),z(u,1),w>0&&!t._since){var S=[1,12,4.3482,7,24,60,60],b=u,x=1;for(I=u;I>=i;I--)e[I]&&(c[b]>=x&&(c[b]=0,w=1),w>0&&(c[I]++,w=0,b=I,x=1)),x*=S[I]}if(h)for(I=i;u>=I;I++)h&&c[I]?h--:h||(c[I]=0);return c}})}(jQuery);