/*! http://keith-wood.name/countdown.html	Countdown for jQuery v2.1.0.	Written by Keith Wood (wood.keith{at}optusnet.com.au) January 2008.	Available under the MIT (http://keith-wood.name/licence.html) license. 	Please attribute the author if you use it. */!function(t){"use strict";var e="countdown",i=0,n=1,o=2,r=3,s=4,a=5,l=6;t.JQPlugin.createPlugin({name:e,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1}},_rtlClass:e+"-rtl",_sectionClass:e+"-section",_amountClass:e+"-amount",_periodClass:e+"-period",_rowClass:e+"-row",_holdingClass:e+"-holding",_showClass:e+"-show",_descrClass:e+"-descr",_timerElems:[],_init:function(){function e(t){var a=1e12>t?o?window.performance.now()+window.performance.timing.navigationStart:n():t||n();a-s>=1e3&&(i._updateElems(),s=a),r(e)}var i=this;this._super(),this._serverSyncs=[];var n="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},o=window.performance&&"function"==typeof window.performance.now,r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,s=0;!r||t.noRequestAnimationFrame?(t.noRequestAnimationFrame=null,t.countdown._timer=setInterval(function(){i._updateElems()},1e3)):(s=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||n(),r(e))},UTCDate:function(t,e,i,n,o,r,s,a){"object"==typeof e&&e instanceof Date&&(a=e.getMilliseconds(),s=e.getSeconds(),r=e.getMinutes(),o=e.getHours(),n=e.getDate(),i=e.getMonth(),e=e.getFullYear());var l=new Date;return l.setUTCFullYear(e),l.setUTCDate(1),l.setUTCMonth(i||0),l.setUTCDate(n||1),l.setUTCHours(o||0),l.setUTCMinutes((r||0)-(Math.abs(t)<30?60*t:t)),l.setUTCSeconds(s||0),l.setUTCMilliseconds(a||0),l},periodsToSeconds:function(t){return 31557600*t[0]+2629800*t[1]+604800*t[2]+86400*t[3]+3600*t[4]+60*t[5]+t[6]},resync:function(){var e=this;t("."+this._getMarker()).each(function(){var i=t.data(this,e.name);if(i.options.serverSync){for(var n=null,o=0;o-1},_removeElem:function(e){this._timerElems=t.map(this._timerElems,function(t){return t===e?null:t})},_updateElems:function(){for(var t=this._timerElems.length-1;t>=0;t--)this._updateCountdown(this._timerElems[t])},_optionsChanged:function(e,i,n){n.layout&&(n.layout=n.layout.replace(/</g,"<").replace(/>/g,">")),this._resetExtraLabels(i.options,n);var o=i.options.timezone!==n.timezone;t.extend(i.options,n),this._adjustSettings(e,i,!this._eqNull(n.until)||!this._eqNull(n.since)||o);var r=new Date;(i._since&&i._sincer)&&this._addElem(e[0]),this._updateCountdown(e,i)},_updateCountdown:function(e,i){if(e=e.jquery?e:t(e),i=i||this._getInst(e)){if(e.html(this._generateHTML(i)).toggleClass(this._rtlClass,i.options.isRTL),"pause"!==i._hold&&t.isFunction(i.options.onTick)){var n="lap"!==i._hold?i._periods:this._calculatePeriods(i,i._show,i.options.significant,new Date);1!==i.options.tickInterval&&this.periodsToSeconds(n)%i.options.tickInterval!==0||i.options.onTick.apply(e[0],[n])}var o="pause"!==i._hold&&(i._since?i._now.getTime()=i._until.getTime());if(o&&!i._expiring){if(i._expiring=!0,this._hasElem(e[0])||i.options.alwaysExpire){if(this._removeElem(e[0]),t.isFunction(i.options.onExpiry)&&i.options.onExpiry.apply(e[0],[]),i.options.expiryText){var r=i.options.layout;i.options.layout=i.options.expiryText,this._updateCountdown(e[0],i),i.options.layout=r}i.options.expiryUrl&&(window.location=i.options.expiryUrl)}i._expiring=!1}else"pause"===i._hold&&this._removeElem(e[0])}},_resetExtraLabels:function(t,e){var i=null;for(i in e)i.match(/[Ll]abels[02-9]|compactLabels1/)&&(t[i]=e[i]);for(i in t)i.match(/[Ll]abels[02-9]|compactLabels1/)&&void 0===e[i]&&(t[i]=null)},_eqNull:function(t){return void 0===t||null===t},_adjustSettings:function(e,i,n){for(var o=null,r=0;r=p;p++)h=h||"?"===e._show[p]&&e._periods[p]>0,f[p]="?"!==e._show[p]||h?e._show[p]:null,c+=f[p]?1:0,d-=e._periods[p]>0?1:0;var m=[!1,!1,!1,!1,!1,!1,!1];for(p=l;p>=i;p--)e._show[p]&&(e._periods[p]?m[p]=!0:(m[p]=d>0,d--));var g=e.options.compact?e.options.compactLabels:e.options.labels,_=e.options.whichLabels||this._normalLabels,v=function(t){var i=e.options["compactLabels"+_(e._periods[t])];return f[t]?u._translateDigits(e,e._periods[t])+(i?i[t]:g[t])+" ":""},y=e.options.padZeroes?2:1,b=function(t){var i=e.options["labels"+_(e._periods[t])];return!e.options.significant&&f[t]||e.options.significant&&m[t]?''+u._minDigits(e,e._periods[t],y)+''+(i?i[t]:g[t])+"":""};return e.options.layout?this._buildLayout(e,f,e.options.layout,e.options.compact,e.options.significant,m):(e.options.compact?''+v(i)+v(n)+v(o)+v(r)+(f[s]?this._minDigits(e,e._periods[s],2):"")+(f[a]?(f[s]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[a],2):"")+(f[l]?(f[s]||f[a]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[l],2):""):''+b(i)+b(n)+b(o)+b(r)+b(s)+b(a)+b(l))+""+(e.options.description?''+e.options.description+"":"")},_buildLayout:function(e,u,h,c,d,f){for(var p=e.options[c?"compactLabels":"labels"],m=e.options.whichLabels||this._normalLabels,g=function(t){return(e.options[(c?"compactLabels":"labels")+m(e._periods[t])]||p)[t]},_=function(t,i){return e.options.digits[Math.floor(t/i)%10]},v={desc:e.options.description,sep:e.options.timeSeparator,yl:g(i),yn:this._minDigits(e,e._periods[i],1),ynn:this._minDigits(e,e._periods[i],2),ynnn:this._minDigits(e,e._periods[i],3),y1:_(e._periods[i],1),y10:_(e._periods[i],10),y100:_(e._periods[i],100),y1000:_(e._periods[i],1e3),ol:g(n),on:this._minDigits(e,e._periods[n],1),onn:this._minDigits(e,e._periods[n],2),onnn:this._minDigits(e,e._periods[n],3),o1:_(e._periods[n],1),o10:_(e._periods[n],10),o100:_(e._periods[n],100),o1000:_(e._periods[n],1e3),wl:g(o),wn:this._minDigits(e,e._periods[o],1),wnn:this._minDigits(e,e._periods[o],2),wnnn:this._minDigits(e,e._periods[o],3),w1:_(e._periods[o],1),w10:_(e._periods[o],10),w100:_(e._periods[o],100),w1000:_(e._periods[o],1e3),dl:g(r),dn:this._minDigits(e,e._periods[r],1),dnn:this._minDigits(e,e._periods[r],2),dnnn:this._minDigits(e,e._periods[r],3),d1:_(e._periods[r],1),d10:_(e._periods[r],10),d100:_(e._periods[r],100),d1000:_(e._periods[r],1e3),hl:g(s),hn:this._minDigits(e,e._periods[s],1),hnn:this._minDigits(e,e._periods[s],2),hnnn:this._minDigits(e,e._periods[s],3),h1:_(e._periods[s],1),h10:_(e._periods[s],10),h100:_(e._periods[s],100),h1000:_(e._periods[s],1e3),ml:g(a),mn:this._minDigits(e,e._periods[a],1),mnn:this._minDigits(e,e._periods[a],2),mnnn:this._minDigits(e,e._periods[a],3),m1:_(e._periods[a],1),m10:_(e._periods[a],10),m100:_(e._periods[a],100),m1000:_(e._periods[a],1e3),sl:g(l),sn:this._minDigits(e,e._periods[l],1),snn:this._minDigits(e,e._periods[l],2),snnn:this._minDigits(e,e._periods[l],3),s1:_(e._periods[l],1),s10:_(e._periods[l],10),s100:_(e._periods[l],100),s1000:_(e._periods[l],1e3)},y=h,b=i;l>=b;b++){var E="yowdhms".charAt(b),w=RegExp("\\{"+E+"<\\}([\\s\\S]*)\\{"+E+">\\}","g");y=y.replace(w,!d&&u[b]||d&&f[b]?"$1":"")}return t.each(v,function(t,e){var i=RegExp("\\{"+t+"\\}","g");y=y.replace(i,e)}),y},_minDigits:function(t,e,i){return e=""+e,e.lengtht._until.getTime()&&(t._now=h=c));var d=[0,0,0,0,0,0,0];if(e[i]||e[n]){var f=this._getDaysInMonth(h.getFullYear(),h.getMonth()),p=this._getDaysInMonth(c.getFullYear(),c.getMonth()),m=c.getDate()===h.getDate()||c.getDate()>=Math.min(f,p)&&h.getDate()>=Math.min(f,p),g=function(t){return 60*(60*t.getHours()+t.getMinutes())+t.getSeconds()},_=Math.max(0,12*(c.getFullYear()-h.getFullYear())+c.getMonth()-h.getMonth()+(c.getDate()y&&h.setDate(y),h.setFullYear(h.getFullYear()+d[i]),h.setMonth(h.getMonth()+d[n]),v&&h.setDate(y)}var b=Math.floor((c.getTime()-h.getTime())/1e3),E=null,w=function(t,i){d[t]=e[t]?Math.floor(b/i):0,b-=d[t]*i};if(w(o,604800),w(r,86400),w(s,3600),w(a,60),w(l,1),b>0&&!t._since){var T=[1,12,4.3482,7,24,60,60],S=l,C=1;for(E=l;E>=i;E--)e[E]&&(d[S]>=C&&(d[S]=0,b=1),b>0&&(d[E]++,b=0,S=E,C=1)),C*=T[E]}if(u)for(E=i;l>=E;E++)u&&d[E]?u--:u||(d[E]=0);return d}})}(jQuery);